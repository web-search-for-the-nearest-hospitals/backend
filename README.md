# ПоисКлиник

[ПоисКлиник](http://poisklinik.acceleratorpracticum.ru/api/) - это 
приложение для поиска ближайших медицинских учреждений.  
В этом репозитории живет backend этого приложения.
Backend реализован с помощью DRF, СУБД - PostgreSQL.

Документация API расположена [тут](http://poisklinik.acceleratorpracticum.ru/api/).

### 1 релиз

<details>
 <summary>Бизнес-логика приложения</summary>

### Обработка сведений о медицинских учреждениях
- отдача списка медицинских учреждений
- отдача свойств конкретного учреждения 
- сортировка списка учреждений по удаленности от переданных координат 
  широты и долготы
- фильтрация учреждений по следующим параметрам: специальности врачей, 
  работающих в организации; город и район расположения организации; является 
  ли организация государственной или коммерческой; является ли организация 
  круглосуточной или нет
- поиск учреждения по его наименованию
- пагинация списка учреждений

### Обработка сведений о специальностях врачей
- отдача списка специальностей врачей в соответствии с Приказом Министерства 
  образования и науки РФ от 12 сентября 2013 г. N 1061 

### Обработка сведений о городах и принадлежащим им административным районам
- отдача списка городов РФ, медицинские учреждения которых используется в 
  сервисе
- отдача конкретного города с имеющимся списком административных районов в нем

### Реализация записи к специальности врача в учреждение
- получение списка талонов для записи
- организация записи пользователя к специальности врача
</details>

<details>
<summary>Особенности реализации сервиса</summary>

1. Техническим заданием установлено, что сервис работает в пределах города 
   Калуги - мы посмотрели дальше и добавили возможность работы в любом городе.
2. Скорость - самая главная характеристика сервиса - каждый SQL-запрос 
   профилирован.
3. Создана и настроена админка для гибкого управления сущностями сервиса.
4. Созданы и настроены (но пока скрыты до 2 релиза) методы создания, 
   редактирования и удаления главной сущностью сервиса - организации.
5. Реализован гибкий процесс по осуществлению записи к врачу в организацию. 
   Сервис в фоновом режиме управляет талонами на заданный период времени. 
   Для записи к врачу достаточно получить список свободных талонов на 
   интересующие пользователя дату приема и специальность врача и записаться.
6. Заранее предугадана и решена проблема **race condition** при записи к 
   врачу - на уровне СУБД при записи блокируется соответствующая строка талона.
7. Особое внимание уделено подробной документации API.
8. Настроен CI/CD на проведение тестов, деплоя и уведомления разработчиков 
   на Discord-сервер.
</details>
<details>
<summary>Установка</summary>

Для локального развертывания используется команда из директории `infra` от root
```shell
docker-compose -f docker-compose-local.yml up --build -d
```
Не забыть про миграции и статику.  
Сервис будет доступен на http://localhost:28962.
</details>